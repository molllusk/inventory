<% @daily_order = daily_order if @daily_order.blank? %>
<html>
  <head>
    <style>
      h3 {
        margin-top: 0px;
        margin-bottom: 0.5em;
      }

      table {
        width:100%;
        margin-top: 0.5em;
        border-collapse: collapse;
      }

      th, td {
        border: 1px solid black;
        padding: 5px;
      }

      #wrap {
        margin: 20px auto;
        width: 900px;
      }

      .email {
        font-size: 1.25em;
      }

      .no_border {
        border: none;
      }

      .left {
        float: left;
      }

      .thirds {
        width: 33%;
        min-height: 1px;
      }

      .final-third {
        width: 34%;
      }

      .two-thirds {
        width: 66%;
        min-height: 1px;
      }

      .full_width {
        width: 100%;
        margin-bottom: 25px;
        overflow: hidden;
      }

      .center {
        text-align: center;
      }

      .align-right {
        text-align: right;
      }

      .logo {
        height: 60px;
      }
    </style>
  </head>
  <body>
    <div id='wrap'>
      <div class='full_width'>
        <div class='left two-thirds'>
          <img class='logo' src='http://mollusk.herokuapp.com/logo.jpg'>
        </div>
        <div class='left final-third'>
          <h2 class='align-right'>Pick List</h2>
        </div>  
      </div>
      <div class='full_width'>
        <div class='left thirds'>
          <h3>Ship to:</h3>
          <%= @daily_order.ship_to_address.html_safe %>
        </div>
        <div class='left thirds'>
        </div>
        <div class='left final-third'>
          <table>
            <tr>
              <th>PO #</th>
              <td><%= @daily_order.display_po %></td>
            </tr>
            <tr>
              <th>Date</th>
              <td><%= @daily_order.date.strftime('%m/%d/%y') %></td>
            </tr>
            <tr>
              <th>Shipping</th>
              <td>UPS Ground</td>
            </tr>
          </table>
        </div>
      </div>
      <table>
        <tr>
          <th>SKU</th>
          <th>Description</th>
          <th>Color</th>
          <th>Size</th>
          <th>Quantity</th>
        </tr>
        <% @daily_order.orders.sort_by { |order| order.product.vend_datum.sort_key }.each do |order| %>
          <tr class='no-page-break'>
            <% vend_product = order.product.vend_datum %>
            <td class='no-page-break'><%= vend_product.sku %></td>
            <td class='no-page-break'><%= vend_product.name %></td>
            <td class='no-page-break'><%= vend_product.variant_options.find { |vo| vo['name'] == 'Color' }&.[]('value') %></td>
            <td class='no-page-break'><%= vend_product.variant_options.find { |vo| vo['name'] == 'Size' }&.[]('value') %></td>
            <td class='no-page-break'><%= order.quantity %></td>
          </tr>
        <% end %>
        <tr class='no-page-break'>
          <td class='no-page-break no_border' colspan='3'></td>
          <td class='no-page-break'><strong>TOTAL</strong></td>
          <td class='no-page-break'><strong><%= @daily_order.total_items %></strong></td>
        </tr>
      </table>
      <p class='center email'>
        <strong>Please email completed packing slip to:</strong><br />
        <a href='mailto:johanna@mollusksurfshop.com'>Johanna@MolluskSurfShop.com</a>
      </p>
    </div>
  </body>
</html>